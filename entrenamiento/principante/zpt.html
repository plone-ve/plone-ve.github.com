

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>15. Zope Page Templates &mdash; Maestría en Plone, un entrenamiento para principiantes - 1.2.5a</title>
  

  
  
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/custom.css" type="text/css" />
  
        <link rel="author" title="Sobre este documento"
              href="about.html"/>
    <link rel="top" title="Maestría en Plone 1.2.5a documentation" href="index.html"/>
        <link rel="next" title="16. Personalizar plantillas existentes" href="zpt_2.html"/>
        <link rel="prev" title="14. Views - Parte I" href="views_1.html"/>
<script type="text/javascript" src="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/plone.js"></script>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Maestría en Plone</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">Sobre &#8220;Maestría en Plone&#8221;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="about.html#upcoming-trainings">Próximos entrenamientos</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#previous-trainings">Entrenamientos previos</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#trainers">Entrenadores</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#using-the-documentation-for-a-training">Usando la documentación para un entrenamiento</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#contributing">Contribuyendo</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html#license">Licencia</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introducción</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#who-are-you">¿Quien eres tu?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-will-we-do">¿Qué haremos?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-will-we-not-do">¿Qué no haremos?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-to-expect">¿Qué esperar?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#documentation">Documentación</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#further-reading">Lecturas recomendadas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. Instalación y configuración</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installing-plone">Instalando Plone</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#hosting-plone">Alojando Plone</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#production-deployment">Despliegue en ambientes de producción</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plone_training_config/instructions.html">3. Instalando Plone para el entrenamiento</a><ul>
<li class="toctree-l2"><a class="reference internal" href="plone_training_config/instructions.html#installing-plone-without-vagrant">Instalando Plone sin Vagrant</a></li>
<li class="toctree-l2"><a class="reference internal" href="plone_training_config/instructions.html#install-virtualbox">Instalar VirtualBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="plone_training_config/instructions.html#install-and-configure-vagrant">Instalar y configurar Vagrant</a></li>
<li class="toctree-l2"><a class="reference internal" href="plone_training_config/instructions.html#what-vagrant-does">¿Qué hace Vagrant?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="anatomy.html">4. La Anatomía de Plone</a><ul>
<li class="toctree-l2"><a class="reference internal" href="anatomy.html#zope2">Zope2</a></li>
<li class="toctree-l2"><a class="reference internal" href="anatomy.html#content-management-framework">Content Management Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="anatomy.html#zope-toolkit-zope3">Zope Toolkit / Zope3</a></li>
<li class="toctree-l2"><a class="reference internal" href="anatomy.html#zope-component-architecture-zca">Zope Component Architecture (ZCA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="anatomy.html#pyramid">Pyramid</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="case.html">5. El caso de estudio</a><ul>
<li class="toctree-l2"><a class="reference internal" href="case.html#background">Detalle</a></li>
<li class="toctree-l2"><a class="reference internal" href="case.html#requirements">Requerimientos</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="features.html">6. Las características de Plone</a><ul>
<li class="toctree-l2"><a class="reference internal" href="features.html#starting-and-stopping-plone">Iniciando y Deteniendo Plone</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#users">Usuarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#configure-a-mailserver">Configurar un servidor de correo</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#walkthrough-of-the-ui">Tutorial de la interfaz de usuario</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#content-types">Tipos de Contenidos</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#folders">Carpetas</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#collections">Colecciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#content-rules">Reglas de Contenido</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#history">Histórico</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#manage-members-and-groups">Administrar usuarios y grupos</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#workflows">Flujos de trabajos</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#working-copy">Copia de trabajo</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#placeful-workflows">Flujos de trabajo Placeful</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuring_customizing.html">7. Configurando y personalizando Plone a través de la Web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#the-control-panel">El panel de control</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#portlets">Portlets</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#viewlets">Viewlets</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#zmi">ZMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring_customizing.html#summary">Resumen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extending.html">8. Extendiendo Plone</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extending.html#extension-technologies">Tecnologías de extensión</a></li>
<li class="toctree-l2"><a class="reference internal" href="extending.html#what-are-components-what-is-zcml">¿Cuáles son los componentes?, ¿Que es el ZCML?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="addons.html">9. Extiende Plone con paquetes Complementos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="addons.html#how-to-find-add-ons">¿Como buscar complementos?</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#some-notable-add-ons">Algunos complementos notables</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#installing-add-ons">Instalando complementos</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#ploneformgen">PloneFormGen</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#add-photogallery-with-collective-plonetruegallery">Agregar Galerías de fotos con collective.plonetruegallery</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#internationalization">Internacionalización</a></li>
<li class="toctree-l2"><a class="reference internal" href="addons.html#summary">Resumen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="theming.html">10. Temas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="theming.html#diazo-example">ejemplo Diazo</a></li>
<li class="toctree-l2"><a class="reference internal" href="theming.html#templating-example">ejemplo de Plantila</a></li>
<li class="toctree-l2"><a class="reference internal" href="theming.html#choosing-the-right-tool">Seleccionando la herramienta adecuada</a></li>
<li class="toctree-l2"><a class="reference internal" href="theming.html#want-to-really-learn-theming">¿Quieres aprender realmente tematización?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dexterity.html">11. Dexterity - Parte I: A través de la Web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#what-is-a-content-type">¿Qué es un tipo de contenido?</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#the-makings-of-a-plone-content-type">Los elementos de un tipo de contenido Plone</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#dexterity-and-archetypes-a-comparison">Dexterity y Archetypes - Una comparación</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#installation">Instalación</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#modifying-existing-types">Modificando tipos existentes</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#creating-content-types-ttw">Creando tipos de contenidos a través de la Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#moving-content-types-into-code">Moviendo el tipo de contenido dentro del código fuente</a></li>
<li class="toctree-l2"><a class="reference internal" href="dexterity.html#exercises">Ejercicios</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="buildout_1.html">12. Buildout - Parte I</a><ul>
<li class="toctree-l2"><a class="reference internal" href="buildout_1.html#syntax">Sintaxis</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildout_1.html#recipes">Recetas</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildout_1.html#references">Referencias</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildout_1.html#a-real-life-example">Un ejemplo de la vida real</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildout_1.html#hello-mr-developer">¡Hola mr.developer!</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildout_1.html#extensible">Extensible</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildout_1.html#be-mcguyver">Sea un McGuyver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="eggs1.html">13. Creando complementos para personalizar Plone</a><ul>
<li class="toctree-l2"><a class="reference internal" href="eggs1.html#using-zopeskel-to-create-an-egg">Usando zopeskel para crear un paquete egg</a></li>
<li class="toctree-l2"><a class="reference internal" href="eggs1.html#inspecting-the-package">Inspeccione el paquete</a></li>
<li class="toctree-l2"><a class="reference internal" href="eggs1.html#including-the-egg-in-plone">Incluyendo el paquete egg en Plone</a></li>
<li class="toctree-l2"><a class="reference internal" href="eggs1.html#return-to-dexterity-moving-content-types-into-code">Volver Dexterity: para mover tipos de contenidos a código fuente</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views_1.html">14. Views - Parte I</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views_1.html#a-simple-browser-view">Una simple browser view</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">15. Zope Page Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tal-and-tales">TAL y TALES</a></li>
<li class="toctree-l2"><a class="reference internal" href="#metal-and-macros">METAL y macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-plone-from-the-template">Accediendo a Plone desde la plantilla</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-we-missed">Lo que echamos de menos</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chameleon">Chameleon</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="zpt_2.html">16. Personalizar plantillas existentes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="zpt_2.html#newsitem-pt">El archivo newsitem.pt</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt_2.html#summary-view-pt">El archivo summary_view.pt</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt_2.html#finding-the-right-template">Buscando la correcta plantilla</a></li>
<li class="toctree-l2"><a class="reference internal" href="zpt_2.html#skin-templates">Plantillas skins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views_2.html">17. Views - Parte II: Una vista por defecto para la &#8220;charla&#8221;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views_2.html#view-classes">Vista de clases</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_2.html#the-default-view">La vista por defecto</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_2.html#exercise">Ejercicio</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views_3.html">18. Views - Parte III: Una lista de Charlas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#using-portal-catalog">Usando portal_catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#brains-and-objects">Cerebros y objetos</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#querying-the-catalog">Consultando el catálogo</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#exercises">Ejercicios</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#the-template-for-the-listing">La plantilla para la lista</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#setting-a-custom-view-as-default-view-on-an-object">Configuración de una vista personalizada como vista por defecto en un objeto</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#adding-some-javascript-collective-js-datatables">Agregando un poco de Javascript (collective.js.datatables)</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_3.html#summary">Resumen</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGES.html">Registro de cambios</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#unreleased">1.2.5 (unreleased)</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#id1">1.2.4 (2014-10-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#id2">1.2.3 (2014-07-11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#id3">1.2.2 (2014-06-01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#id4">1.2.1 (2014-05-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#id5">1.2 (2014-05-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#october-2013">1.1 (October 2013)</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#october-2012">1.0 (October, 2012)</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#october-2011">0.2 October 2011</a></li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html#october-2009">0.1 (October 2009)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Mapa de ruta</a><ul>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#id1">1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#todo">Todo</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Maestría en Plone</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>15. Zope Page Templates</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="zope-page-templates">
<h1>15. Zope Page Templates<a class="headerlink" href="#zope-page-templates" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">¡Obtén el código!</p>
<p>Obtén el código para este capítulo (<a class="reference internal" href="sneak.html"><em>Más información</em></a>) usando este comando en el directorio buildout:</p>
<div class="last highlight-bash"><div class="highlight"><pre>cp -R src/ploneconf.site_sneak/chapters/16_zpt_2/ src/ploneconf.site
</pre></div>
</div>
</div>
<p>Page Templates son archivos HTML con alguna información adicional, escritas en TAL, METAL y TALES.</p>
<p>Las page templates debe ser XML válido.</p>
<p>Las tres lenguas son:</p>
<ul class="simple">
<li>TAL: &#8220;Template Attribute Language&#8221;<ul>
<li><p class="first">Plantillas XML/HTML usando especiales Atributos</p>
</li>
<li><p class="first">Usando TAL nosotros podemos incluir expresiones en HTML</p>
</li>
</ul>
</li>
<li>TALES: &#8220;TAL Expression Syntax&#8221;<ul>
<li><p class="first">Define la sintaxis y la semántica de estas expresiones</p>
</li>
</ul>
</li>
<li>METAL: &#8220;Macro Expansion for TAL&#8221;<ul>
<li><p class="first">Esto nos permite combinar, la reutilización y las plantillas anidadas juntos</p>
</li>
</ul>
</li>
</ul>
<p>TAL and METAL are written like html-attributes (url, src, title). TALES are written like the values of html-attributes. A typical TAL-Statement looks like this:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;title</span> <span class="na">tal:content=</span><span class="s">&quot;context/title&quot;</span><span class="nt">&gt;</span>
    The Title of the content
<span class="nt">&lt;/title&gt;</span>
</pre></div>
</div>
<p>Se utiliza para modificar la salida:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:content=</span><span class="s">&quot;string:I love red&quot;</span><span class="nt">&gt;</span>I love blue<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>resultado en:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p&gt;</span>I love red<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>Vamos a intentarlo. Abra el archivo <code class="docutils literal"><span class="pre">demoview.pt</span></code> y agregue:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span>
      <span class="na">lang=</span><span class="s">&quot;en&quot;</span>
      <span class="na">i18n:domain=</span><span class="s">&quot;ploneconf.site&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;body&gt;</span>

    <span class="nt">&lt;p&gt;</span>red<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<div class="section" id="tal-and-tales">
<h2>TAL y TALES<a class="headerlink" href="#tal-and-tales" title="Permalink to this headline">¶</a></h2>
<p>Vamos a añadir un poco de magia y modificar la etiqueta &lt;p&gt;:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:content=</span><span class="s">&quot;string:blue&quot;</span><span class="nt">&gt;</span>red<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>Esto resultará en el siguiente código HTML:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p&gt;</span>blue<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>Sin reiniciar Plone abra en el navegador la siguiente dirección URL <a class="reference external" href="http://localhost:8080/Plone/&#64;&#64;demoview">http://localhost:8080/Plone/&#64;&#64;demoview</a>.</p>
<p>Lo mismo ocurre con los atributos. Remplace en la línea &lt;p&gt; con el siguiente código:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.mssharepointconference.com&quot;</span>
   <span class="na">tal:define=</span><span class="s">&quot;a_fine_url string:http://www.ploneconf.org&quot;</span>
   <span class="na">tal:attributes=</span><span class="s">&quot;href a_fine_url&quot;</span>
   <span class="na">tal:content=</span><span class="s">&quot;string:A even better conference&quot;</span><span class="nt">&gt;</span>
    A sharepoint conference
<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
<p>resultado en:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.ploneconf.org&quot;</span><span class="nt">&gt;</span>
    A even better conference
<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
<p>Nosotros hemos utilizado los tres atributos TAL aquí. A continuación una la lista completa de los atributos TAL:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">tal:define</span></code></dt>
<dd><p class="first last">definir las variables. Nosotros definimos la variable URL para la cadena &#8220;<a class="reference external" href="http://www.ploneconf.org">http://www.ploneconf.org</a>&#8220;</p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:content</span></code></dt>
<dd><p class="first last">reemplazar el contenido de un elemento. Hemos sustituido el valor por defecto de contenido con algunas como &#8220;A even better conference&#8221;</p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:attributes</span></code></dt>
<dd><p class="first last">cambiar dinámicamente atributos de los elementos. Nosotros hemos establecido el atributo HTML href a la variable <code class="docutils literal"><span class="pre">a_fine_url</span></code></p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:condition</span></code></dt>
<dd><p class="first last">pruebas, si la expresión es verdadera o falsa.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:repeat</span></code></dt>
<dd><p class="first last">repite un elemento iterable, en nuestro caso, la lista de charlas.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:replace</span></code></dt>
<dd><p class="first last">reemplazar el contenido de un elemento como <code class="docutils literal"><span class="pre">tal:content</span></code>, pero se elimina el elemento sólo dejando el contenido.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:omit-tag</span></code></dt>
<dd><p class="first last">eliminar un elemento, dejando el contenido del elemento.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:on-error</span></code></dt>
<dd><p class="first last">controlar los errores.</p>
</dd>
</dl>
<div class="section" id="python-expressions">
<h3>Expresiones Python<a class="headerlink" href="#python-expressions" title="Permalink to this headline">¶</a></h3>
<p>Hasta ahora sólo utilizamos una expresión TALES (el bit <code class="docutils literal"><span class="pre">string:</span></code>). Usemos una expresión TALES diferente ahora. Con <code class="docutils literal"><span class="pre">python:</span></code> podemos usar código Python. A continuación un ejemplo sencillo:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:define=</span><span class="s">&quot;title context/title&quot;</span>
   <span class="na">tal:content=</span><span class="s">&quot;python:title.upper()&quot;</span><span class="nt">&gt;</span>
   A big title
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>Y otro ejemplo:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:define=</span><span class="s">&quot;talks python:[&#39;Dexterity for the win!&#39;,</span>
<span class="s">                             &#39;Deco is the future&#39;,</span>
<span class="s">                             &#39;A keynote on some weird topic&#39;,</span>
<span class="s">                             &#39;The talk that I did not submit&#39;]&quot;</span>
   <span class="na">tal:content=</span><span class="s">&quot;python:talks[0]&quot;</span><span class="nt">&gt;</span>
    A talk
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>Con expresiones python</p>
<ul class="simple">
<li><p class="first">sólo se puede escribir declaraciones individuales</p>
</li>
<li><p class="first">usted podría importar cosas pero no debe (ejemplo: <code class="docutils literal"><span class="pre">tal:define=&quot;something</span> <span class="pre">modules/Products.PythonScripts/something;</span></code>).</p>
</li>
</ul>
</div>
<div class="section" id="tal-condition">
<h3>tal:condition<a class="headerlink" href="#tal-condition" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">tal:condition</span></code></dt>
<dd><p class="first last">pruebas, si la expresión es verdadera o falsa.</p>
</dd>
</dl>
<ul class="simple">
<li><p class="first">Si es true, entonces la etiqueta se representa.</p>
</li>
<li><p class="first">Si es false, entonces la etiqueta <strong>y todos sus hijos</strong> se retiran y ya no se evalúa.</p>
</li>
<li><p class="first">Podemos invertir la lógica anteponiendo un <code class="docutils literal"><span class="pre">not:</span></code> a la expresión.</p>
</li>
</ul>
<p>Vamos a añadir otro atributo TAL para nuestro ejemplo anterior:</p>
<div class="highlight-python"><div class="highlight"><pre>tal:condition=&quot;talks&quot;
</pre></div>
</div>
<p>También pudimos probar que el número de charlas:</p>
<div class="highlight-python"><div class="highlight"><pre>tal:condition=&quot;python:len(talks) &gt;= 1&quot;
</pre></div>
</div>
<p>o si una cierta charla está en la lista de charlas:</p>
<div class="highlight-python"><div class="highlight"><pre>tal:condition=&quot;python:&#39;Deco is the future&#39; in talks&quot;
</pre></div>
</div>
</div>
<div class="section" id="tal-repeat">
<h3>tal:repeat<a class="headerlink" href="#tal-repeat" title="Permalink to this headline">¶</a></h3>
<p>Probemos otra sentencia:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:define=</span><span class="s">&quot;talks python:[&#39;Dexterity for the win!&#39;,</span>
<span class="s">                             &#39;Deco is the future&#39;,</span>
<span class="s">                             &#39;A keynote on some weird topic&#39;,</span>
<span class="s">                             &#39;The talk that I did not submit&#39;]&quot;</span>
   <span class="na">tal:repeat=</span><span class="s">&quot;talk talks&quot;</span>
   <span class="na">tal:content=</span><span class="s">&quot;talk&quot;</span><span class="nt">&gt;</span>
   A talk
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">tal:repeat</span></code></dt>
<dd><p class="first last">repite un elemento iterable, en nuestro caso, la lista de charlas.</p>
</dd>
</dl>
<p>Cambiamos el formato un poco para construir una lista en la que hay una lista de elementos HTML <code class="docutils literal"><span class="pre">&lt;li&gt;</span></code> para cada charla:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;ul</span> <span class="na">tal:define=</span><span class="s">&quot;talks python:[&#39;Dexterity for the win!&#39;,</span>
<span class="s">                              &#39;Deco is the future&#39;,</span>
<span class="s">                              &#39;A keynote on some weird topic&#39;,</span>
<span class="s">                              &#39;The talk that I did not submit&#39;]&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">tal:repeat=</span><span class="s">&quot;talk talks&quot;</span>
        <span class="na">tal:content=</span><span class="s">&quot;talk&quot;</span><span class="nt">&gt;</span>
          A talk
    <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">tal:condition=</span><span class="s">&quot;not:talks&quot;</span><span class="nt">&gt;</span>
          Sorry, no talks yet.
    <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="path-expressions">
<h3>Expresiones de rutas<a class="headerlink" href="#path-expressions" title="Permalink to this headline">¶</a></h3>
<p>En cuanto TALES hasta ahora hemos utilizado la <code class="docutils literal"><span class="pre">string:</span></code> o <code class="docutils literal"><span class="pre">python:</span></code> o sólo las variables. La expresión siguiente y más comunes son las expresiones de rutas (path-expressions). Opcionalmente se puede iniciar expresión de ruta con el atributo <code class="docutils literal"><span class="pre">path:</span></code></p>
<p>Cada expresión de ruta comienza con un nombre de variable. Puede ser tanto un objeto como <code class="docutils literal"><span class="pre">context</span></code>, <code class="docutils literal"><span class="pre">view</span></code>, <code class="docutils literal"><span class="pre">template</span></code> o una variable definida anteriormente como <code class="docutils literal"><span class="pre">talk</span></code>.</p>
<p>Después de la variable se añade una barra <code class="docutils literal"><span class="pre">/</span></code> y el nombre de un sub-objeto, atributo o método llamable. El &#8216;/&#8217; se utiliza para terminar el nombre de un objeto y el inicio del nombre de la propiedad. Las mismas propiedades pueden ser objetos que a su vez tienen propiedades.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:content=</span><span class="s">&quot;context/title&quot;</span><span class="nt">&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<p>Podemos encadenar varios de los elementos para obtener la información que queremos.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:content=</span><span class="s">&quot;context/REQUEST/form&quot;</span><span class="nt">&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<p>Esto devolverá un diccionario de los valores del formulario del objeto HTTPRequest. Útil para la manipulación del formulario.</p>
<p>El <code class="docutils literal"><span class="pre">|</span></code> (operador lógico &#8220;o&#8221;) se utiliza para encontrar un valor alternativo a una ruta si la primera ruta se evalúe como <code class="docutils literal"><span class="pre">nothing</span></code> o no existe.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:content=</span><span class="s">&quot;context/title | context/id&quot;</span><span class="nt">&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<p>Esto devuelve el id del contexto si no tiene título.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:replace=</span><span class="s">&quot;talk/average_rating | nothing&quot;</span><span class="nt">&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<p>Esto devuelve nothing si no hay &#8216;average_rating&#8217; para una charla. Lo que no funciona es <code class="docutils literal"><span class="pre">tal:content=&quot;python:talk['average_rating']</span> <span class="pre">or</span> <span class="pre">''&quot;</span></code>. ¿Quién sabe lo que esto produciría?</p>
<p>Conseguiremos <code class="docutils literal"><span class="pre">KeyError:</span> <span class="pre">'average_rating'</span></code>. Es muy mala práctica, usar el operador <code class="docutils literal"><span class="pre">|</span></code> con demasiada frecuencia, ya que se tragará errores como un error tipográfico en <code class="docutils literal"><span class="pre">tal:content=&quot;talk/averange_ratting</span> <span class="pre">|&nbsp;nothing&quot;</span></code> y es posible que se preguntan por qué no existen calificaciones más tarde...</p>
<p>No puede y no debe utilizarlo para evitar errores como un bloque try/except.</p>
<p>Hay varias <strong>variables incorporadas</strong> que se pueden utilizar en rutas:</p>
<p>El más utilizado es <code class="docutils literal"><span class="pre">nothing</span></code> que es el equivalente a <code class="docutils literal"><span class="pre">None</span></code></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p</span> <span class="na">tal:replace=</span><span class="s">&quot;nothing&quot;</span><span class="nt">&gt;</span>
    this comment will not be rendered
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>Un diccionario de todas las variables disponibles es <code class="docutils literal"><span class="pre">CONTEXTS</span></code></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;dl</span> <span class="na">tal:define=</span><span class="s">&quot;path_variables_dict CONTEXTS&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;tal:vars</span> <span class="na">tal:repeat=</span><span class="s">&quot;variable path_variables_dict&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;dt</span> <span class="na">tal:content=</span><span class="s">&quot;variable&quot;</span><span class="nt">&gt;&lt;/dt&gt;</span>
    <span class="nt">&lt;dd</span> <span class="na">tal:content=</span><span class="s">&quot;python:path_variables_dict[variable]&quot;</span><span class="nt">&gt;&lt;/dd&gt;</span>
  <span class="nt">&lt;/tal:vars&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
</pre></div>
</div>
<p>Muy útil para depuración :-)</p>
</div>
<div class="section" id="pure-tal-blocks">
<h3>Puro bloques TAL<a class="headerlink" href="#pure-tal-blocks" title="Permalink to this headline">¶</a></h3>
<p>Podemos utilizar atributos TAL sin marcas HTML. Esto es útil cuando no es necesario añadir las etiquetas para el marcado</p>
<p>Sintaxis:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;tal:block</span> <span class="na">attribute=</span><span class="s">&quot;expression&quot;</span><span class="nt">&gt;</span>some content<span class="nt">&lt;/tal:block&gt;</span>
</pre></div>
</div>
<p>Ejemplos:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;tal:block</span> <span class="na">define=</span><span class="s">&quot;id template/id&quot;</span><span class="nt">&gt;</span>
...
  <span class="nt">&lt;b</span> <span class="na">tal:content=</span><span class="s">&quot;id&quot;</span><span class="nt">&gt;</span>The id of the template<span class="nt">&lt;/b&gt;</span>
...
<span class="nt">&lt;/tal:block&gt;</span>

<span class="nt">&lt;tal:news</span> <span class="na">condition=</span><span class="s">&quot;python:context.content_type == &#39;News Item&#39;&quot;</span><span class="nt">&gt;</span>
    This text is only visible if the context is a News Item
<span class="nt">&lt;/tal:news&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="handling-complex-data-in-templates">
<h3>Manejo de datos complejos en plantillas<a class="headerlink" href="#handling-complex-data-in-templates" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s move on to a little more complex data. And to another TAL-attribute:</p>
<dl class="docutils">
<dt>tal:replace</dt>
<dd><p class="first last">reemplazar el contenido de un elemento y elimina el elemento dejando sólo el contenido.</p>
</dd>
</dl>
<p>Ejemplo:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">tal:define=</span><span class="s">&quot;tag string:&lt;img src=&#39;https://plone.org/logo.png&#39;&gt;&quot;</span>
         <span class="na">tal:replace=</span><span class="s">&quot;tag&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>esto resulta en:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p&gt;</span>
    <span class="ni">&amp;lt;</span>img src=&#39;https://plone.org/logo.png&#39;<span class="ni">&amp;gt;</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">tal:replace</span></code> suelta su propia base de etiquetas a favor del resultado de la expresión TALES. Por lo tanto el original <code class="docutils literal"><span class="pre">&lt;img...</span> <span class="pre">&gt;</span></code> se sustituye. Pero el resultado se escapó por defecto.</p>
<p>Para prevenir que se escapen utilizamos <code class="docutils literal"><span class="pre">structure</span></code></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">tal:define=</span><span class="s">&quot;tag string:&lt;img src=&#39;https://plone.org/logo.png&#39;&gt;&quot;</span>
         <span class="na">tal:replace=</span><span class="s">&quot;structure tag&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>Ahora vamos a emular una estructura típica Plone mediante la creación de un diccionario.</p>
<div class="highlight-html"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre>  <span class="nt">&lt;table</span> <span class="na">tal:define=</span><span class="s">&quot;talks python:[{&#39;title&#39;:&#39;Dexterity for the win!&#39;,</span>
<span class="s">                                    &#39;subjects&#39;:(&#39;content-types&#39;, &#39;dexterity&#39;)},</span>
<span class="s">                                   {&#39;title&#39;:&#39;Deco is the future&#39;,</span>
<span class="s">                                    &#39;subjects&#39;:(&#39;layout&#39;, &#39;deco&#39;)},</span>
<span class="s">                                   {&#39;title&#39;:&#39;The State of Plone&#39;,</span>
<span class="s">                                    &#39;subjects&#39;:(&#39;keynote&#39;,) },</span>
<span class="s">                                   {&#39;title&#39;:&#39;Diazo designs dont suck!&#39;,</span>
<span class="s">                                    &#39;subjects&#39;:(&#39;design&#39;, &#39;diazo&#39;, &#39;xslt&#39;)}</span>
<span class="s">                                  ]&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;th&gt;</span>Title<span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;th&gt;</span>Topics<span class="nt">&lt;/th&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;tr</span> <span class="na">tal:repeat=</span><span class="s">&quot;talk talks&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;td</span> <span class="na">tal:content=</span><span class="s">&quot;talk/title&quot;</span><span class="nt">&gt;</span>A talk<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td</span> <span class="na">tal:define=</span><span class="s">&quot;subjects talk/subjects&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;span</span> <span class="na">tal:repeat=</span><span class="s">&quot;subject subjects&quot;</span>
                    <span class="na">tal:replace=</span><span class="s">&quot;subject&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;/tr&gt;</span>
  <span class="nt">&lt;/table&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Nosotros emulamos una lista de charlas y mostramos información en una tabla. Pondremos en contacto a la lista de las charlas más tarde, cuando se utilizan los verdaderos objetos charlas que hemos creado con un tipo de contenido dexterity.</p>
<p>Para completar la lista aquí están los atributos TAL que no hemos utilizado todavía:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">tal:omit-tag</span></code></dt>
<dd><p class="first last">Omita las etiquetas de los elementos, dejando sólo el contenido interno.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:on-error</span></code></dt>
<dd><p class="first last">controlar los errores.</p>
</dd>
</dl>
<p>Cuando un elemento tiene múltiples sentencias, se ejecutan en este orden:</p>
<ol class="arabic simple">
<li>define</li>
<li>condition</li>
<li>repeat</li>
<li><p class="first">content o replace</p>
</li>
<li>attributes</li>
<li>omit-tag</li>
</ol>
</div>
</div>
<div class="section" id="metal-and-macros">
<h2>METAL y macros<a class="headerlink" href="#metal-and-macros" title="Permalink to this headline">¶</a></h2>
<p>¿Por qué nuestra vista es tan feo?, ¿Cómo conseguimos nuestro HTML para representar en la interfaz de usuario de Plone?</p>
<p>Utilizamos METAL (Macro Extension to TAL) para definir ranuras que podemos llenar y macros que podemos reutilizar.</p>
<p>Agregamos a la etiqueta <code class="docutils literal"><span class="pre">&lt;html&gt;</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>metal:use-macro=&quot;context/main_template/macros/master&quot;
</pre></div>
</div>
<p>Y a continuación, ajustar el código que queremos poner en el área de contenido de Plone en:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;metal:content-core</span> <span class="na">fill-slot=</span><span class="s">&quot;content-core&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/metal:content-core&gt;</span>
</pre></div>
</div>
<p>Esto pondrá a nuestro código de una sección definida en el main_template llamado &#8220;content-core&#8221;.</p>
<p>Ahora la plantilla debería tener el siguiente aspecto:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span>
      <span class="na">lang=</span><span class="s">&quot;en&quot;</span>
      <span class="na">metal:use-macro=</span><span class="s">&quot;context/main_template/macros/master&quot;</span>
      <span class="na">i18n:domain=</span><span class="s">&quot;ploneconf.site&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;metal:content-core</span> <span class="na">fill-slot=</span><span class="s">&quot;content-core&quot;</span><span class="nt">&gt;</span>

<span class="nt">&lt;table</span> <span class="na">tal:define=</span><span class="s">&quot;talks python:[{&#39;title&#39;:&#39;Dexterity for the win!&#39;,</span>
<span class="s">                                  &#39;subjects&#39;:(&#39;content-types&#39;, &#39;dexterity&#39;)},</span>
<span class="s">                                 {&#39;title&#39;:&#39;Deco is the future&#39;,</span>
<span class="s">                                  &#39;subjects&#39;:(&#39;layout&#39;, &#39;deco&#39;)},</span>
<span class="s">                                 {&#39;title&#39;:&#39;The State of Plone&#39;,</span>
<span class="s">                                  &#39;subjects&#39;:(&#39;keynote&#39;,) },</span>
<span class="s">                                 {&#39;title&#39;:&#39;Diazo designs are great&#39;,</span>
<span class="s">                                  &#39;subjects&#39;:(&#39;design&#39;, &#39;diazo&#39;, &#39;xslt&#39;)}</span>
<span class="s">                                ]&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;th&gt;</span>Title<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;th&gt;</span>Topics<span class="nt">&lt;/th&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr</span> <span class="na">tal:repeat=</span><span class="s">&quot;talk talks&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">tal:content=</span><span class="s">&quot;talk/title&quot;</span><span class="nt">&gt;</span>A talk<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td</span> <span class="na">tal:define=</span><span class="s">&quot;subjects talk/subjects&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">tal:repeat=</span><span class="s">&quot;subject subjects&quot;</span>
                  <span class="na">tal:replace=</span><span class="s">&quot;subject&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span>

<span class="nt">&lt;/metal:content-core&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Desde la vista demoview solamente es utilizada el contenido de la plantilla, no por el contexto que le toca no tiene mucho sentido tener la barra de edición. Entonces lo ocultamos estableciendo la variable correspondiente en el actual request con el python a 1: <code class="docutils literal"><span class="pre">request.set('disable_border',</span> <span class="pre">1)</span></code>.</p>
<p>La manera más fácil de hacer esto es definir una variable dummy. Dummy porque nunca se usa, salvo que nos permita ejecutar algún código.</p>
<div class="last highlight-xml"><div class="highlight"><pre><span class="nt">&lt;metal:block</span> <span class="na">fill-slot=</span><span class="s">&quot;top_slot&quot;</span>
    <span class="na">tal:define=</span><span class="s">&quot;dummy python:request.set(&#39;disable_border&#39;, 1)&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="macros-in-browser-views">
<h3>Macros en browser-views<a class="headerlink" href="#macros-in-browser-views" title="Permalink to this headline">¶</a></h3>
<p>Define un macro en un nuevo archivo <code class="docutils literal"><span class="pre">macros.pt</span></code></p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">metal:define-macro=</span><span class="s">&quot;my_macro&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>I can be reused<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>Registrarlo como un BrowserView (esta vez sin una clase Python) en sentencias ZCML:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;browser:page</span>
  <span class="na">for=</span><span class="s">&quot;*&quot;</span>
  <span class="na">name=</span><span class="s">&quot;ploneconf.site.macros&quot;</span>
  <span class="na">template=</span><span class="s">&quot;templates/macros.pt&quot;</span>
  <span class="na">permission=</span><span class="s">&quot;zope2.View&quot;</span>
  <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Reuse el macro en la plantilla <code class="docutils literal"><span class="pre">demoview.pt</span></code>:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">metal:use-macro=</span><span class="s">&quot;view/context/@@ploneconf.site.macros/my_macro&quot;</span><span class="nt">&gt;</span>
    Instead of this the content of the macro will appear...
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="accessing-plone-from-the-template">
<h2>Accediendo a Plone desde la plantilla<a class="headerlink" href="#accessing-plone-from-the-template" title="Permalink to this headline">¶</a></h2>
<p>En nuestra plantilla tenemos acceso al contexto del objeto en el que la vista se llamada, la propia browser-views (es decir, todos los métodos de Python vamos a colocarlos en la vista más adelante), los objetos request y response y con esos podemos conseguir casi cualquier cosa.</p>
<p>En las plantillas también podemos acceder a otras browser-views. Algunos de los que existen para facilitar el acceso a los métodos que a menudo necesitamos:</p>
<div class="highlight-python"><div class="highlight"><pre>tal:define=&quot;context_state context/@@plone_context_state;
            portal_state context/@@plone_portal_state;
            plone_tools context/@@plone_tools;
            plone_view context/@@plone;&quot;
</pre></div>
</div>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">&#64;&#64;plone_context_state</span></code></dt>
<dd><p class="first last">El BrowserView <code class="docutils literal"><span class="pre">plone.app.layout.globals.context.ContextState</span></code> tiene métodos útiles que tienen que ver con el objeto de contexto actual como <code class="docutils literal"><span class="pre">is_default_page</span></code></p>
</dd>
<dt><code class="docutils literal"><span class="pre">&#64;&#64;plone_portal_state</span></code></dt>
<dd><p class="first last">El BrowserView <code class="docutils literal"><span class="pre">plone.app.layout.globals.portal.PortalState</span></code> tiene métodos para el portal como <code class="docutils literal"><span class="pre">portal_url</span></code></p>
</dd>
<dt><code class="docutils literal"><span class="pre">&#64;&#64;plone_tools</span></code></dt>
<dd>The BrowserView <code class="docutils literal"><span class="pre">plone.app.layout.globals.tools.Tools</span></code> gives access to the most important tools like <code class="docutils literal"><span class="pre">plone_tools/catalog</span></code></dd>
</dl>
<p>Estos son muy utilizados y hay muchos más.</p>
</div>
<div class="section" id="what-we-missed">
<h2>Lo que echamos de menos<a class="headerlink" href="#what-we-missed" title="Permalink to this headline">¶</a></h2>
<p>Hay algunas cosas que no nos cubrimos hasta el momento:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">tal:condition=&quot;exists:expression&quot;</span></code></dt>
<dd><p class="first last">comprueba si existe un objeto o un atributo (rara vez utilizada)</p>
</dd>
<dt><code class="docutils literal"><span class="pre">tal:condition=&quot;nocall:context&quot;</span></code></dt>
<dd><p class="first last">que explícitamente no llamar a un método llamable.</p>
</dd>
</dl>
<p>Si nos referimos a objetos de contenido sin usar el modificador nocall: estos objetos son innecesariamente representados en la memoria como la expresión se evaluada.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">i18n:translate</span></code> y <code class="docutils literal"><span class="pre">i18n:domain</span></code></dt>
<dd><p class="first last">las cadenas que ponemos en las plantillas se pueden traducir de forma automática.</p>
</dd>
</dl>
<p>Hay mucho más acerca de TAL, TALES y METAL que no hemos cubierto. Usted solamente aprenderá si sigues leyendo, escribiendo y personalización de plantillas.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference external" href="http://docs.plone.org/adapt-and-extend/theming/templates_css/template_basics.html">http://docs.plone.org/adapt-and-extend/theming/templates_css/template_basics.html</a></li>
<li><p class="first">Usando Zope Page Templates: <a class="reference external" href="http://docs.zope.org/zope2/zope2book/ZPT.html">http://docs.zope.org/zope2/zope2book/ZPT.html</a></p>
</li>
<li><p class="first">Referencia de Zope Page Templates: <a class="reference external" href="http://docs.zope.org/zope2/zope2book/AppendixC.html">http://docs.zope.org/zope2/zope2book/AppendixC.html</a></p>
</li>
</ul>
</div>
</div>
<div class="section" id="chameleon">
<h2>Chameleon<a class="headerlink" href="#chameleon" title="Permalink to this headline">¶</a></h2>
<p>Chameleon es el sucesor de TAL y serán incorporado en Plone 5.</p>
<ul class="simple">
<li><p class="first">Plip para Chameleon: <a class="reference external" href="https://dev.plone.org/ticket/12198">https://dev.plone.org/ticket/12198</a></p>
</li>
<li><p class="first">Página principal: <a class="reference external" href="http://www.pagetemplates.org/">http://www.pagetemplates.org/</a></p>
</li>
<li><p class="first">Capa de Integración para Plone: <a class="reference external" href="https://pypi.python.org/pypi/five.pt">five.pt</a></p>
</li>
</ul>
<p>En Plone 4 nosotros usaremos ZPT por defecto.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="zpt_2.html" class="btn btn-neutral float-right" title="16. Personalizar plantillas existentes"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="views_1.html" class="btn btn-neutral" title="14. Views - Parte I"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The text and illustrations in this website are licensed by the Plone Foundation under a Creative Commons Attribution 4.0 International license.
      Actualizado por última vez en 08 de March de 2015.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2.5a',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/jquery.js"></script>
      <script type="text/javascript" src="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/underscore.js"></script>
      <script type="text/javascript" src="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/doctools.js"></script>
      <script type="text/javascript" src="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="https://raw.githubusercontent.com/plone-ve/plone-ve.github.com/master/entrenamiento/principante/_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .admonition-title").show();
        $(".toggle .admonition-title").click(function() {
            $(this).parent().children().not(".admonition-title").toggle(400);
            $(this).parent().children(".admonition-title").toggleClass("open");
        })
    });
</script>


</body>
</html>